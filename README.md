# Trading Bot Package - Stable Trading Strategy

## 안정적 실제 거래 전략 (2024-03-21)

### 1. 포지션 사이징 & 레버리지 전략
- **리스크 관리**: 계좌 자산의 1% per Trade
- **포지션 크기**: (자산 × 0.01) ÷ ATR14
- **레버리지 조정**:
  - ATR14 백분위 상위 25% → ×5
  - 중간 50% → ×10
  - 하위 25% → ×15
- **연속 손실 페널티**: 2연패 시 리스크 75% 축소

### 2. 주문 실행 전략
- **지정가(메이커) 주문 우선**
- **비상 시장가 주문**: ADX(14) ≥ 75 시
- **슬리피지 반영**: ±0.01% 가격 가산
- **주문 분할**: 큰 주문 시 3분할 집행

### 3. 진입 조건
- **RSI 기준**: 롱 < 30, 숏 > 70
- **MACD 히스토그램**: 5봉 연속 확인
- **스토캐스틱**: 5봉 연속 교차 확인
- **ATR 필터**: ATR14 > EMA(ATR14,20) × 1.1
- **볼린저 밴드**: 0.8% 이상 이탈
- **거래량**: 20MA × 1.2 이상

### 4. 청산 전략
- **익절**:
  - 1단계: +1.2% → 30% 청산
  - 2단계: +2.5% → 40% 청산
  - 3단계: +4.0% → 100% 청산
- **손절**:
  - 1단계: -0.8% → 50% 청산
  - 2단계: -1.5% → 100% 청산
- **트레일링 스탑**: 1.5% 이상 수익 시 0.8% 트레일링

### 5. 시장 레짐 필터
- **횡보장 필터**: ADX < 25
- **강추세 필터**: ADX ≥ 40
- **멀티 타임프레임 확인**: 1시간, 15분, 5분 (모든 타임프레임 일치 필수)

## 리스크 관리
- **최대 포지션**: 계좌의 20% 이하
- **일일 손실 한도**: 계좌의 2% 이하
- **주간 손실 한도**: 계좌의 5% 이하
- **최대 동시 포지션**: 2개 이하
- **야간 포지션**: 50% 축소

## 주요 특징
- 보수적인 포지션 사이징
- 낮은 레버리지 활용
- 철저한 리스크 관리
- 장기 수익 추구
- 안정성 우선

## 설치 및 실행
```bash
pip install -r requirements.txt
python main.py --mode stable
```

## 설정
`config/settings.py`에서 다음 설정을 조정할 수 있습니다:
- 거래 쌍
- 시간대
- API 키
- 리스크 관리 매개변수

## 모니터링
- 실시간 포지션 추적
- 리스크 지표 모니터링
- 수익률 분석
- 거래 기록 보관
- 일/주간 리포트 생성

## 안전 장치
- **자동 거래 중단 조건**:
  - 일일 손실 한도 도달
  - 비정상적 시장 변동성
  - API 오류 발생
  - 네트워크 불안정
- **수동 개입 필요 상황**:
  - 주요 경제 지표 발표
  - 중요 뉴스 이벤트
  - 비정상적 가격 움직임
  - 시스템 이상 징후